
<div [@showPage]="'on'">

  <button (click)="toggleDisplay()" class="btn btn-info">{{ toggleButton }}</button>

  <div *ngIf="topic && view === 'data'" class="panel panel-success voting-panel" [@showPage]="'on'" >
    <div class="panel-heading">
      <h2 class="panel-title">{{ topic.topicTitle }}
        <span *ngIf="hasVoted" class="pull-right voted">voted</span>
        <span *ngIf="hasVoted" class="glyphicon glyphicon-ok-sign pull-right" aria-hidden="true"></span>
      </h2>
    </div>
    <div class="panel-body">
      <p>{{ topic.topicQuestion }}</p>
      <p><i> - {{ topic.username  }}</i></p>
    </div>

    <table class="table">
      <thead>
        <tr>
          <th>Option</th>
          <th>Votes</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let result of results">
          <td class="option-cell">{{ result.option | titlecase }}</td>
          <td>{{ result.votes }}</td>
        </tr>
        <tr>
          <td class="option-cell">TOTAL</td>
          <td>{{ totalVotes }}</td>
        </tr>
      </tbody>
    </table>

  </div>
  <!--results panel end-->
  <app-chart *ngIf="view === 'chart'" [_id]="_id"></app-chart>


  <div *ngIf="!hasVoted && currentUser" class="panel panel-success voting-panel">
    <div class="panel-heading">
      <h3 class="panel-title">Cast Your Vote</h3>
    </div>
    <div class="panel-body">
      <div class="btn-group" role="group">
        <button
          *ngFor="let result of results"
          class="btn btn-default"
          value="{{ result.option }}"
          (click)="castVote($event)">
          {{ result.option }}
        </button>
      </div>
    </div>
  </div>

  <div *ngIf="!currentUser && view === 'data'" class="alert alert-warning" role="alert" [@showPage]="'on'">
    To vote, please <a [routerLink]="['/login/register']">register</a> or <a [routerLink]="['/login']">login</a>.
  </div>

</div>




